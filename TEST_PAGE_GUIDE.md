# 系統功能完整測試頁面 - 使用說明

## 📋 總覽

已完成以下三個文件和一個測試頁面:

1. **SYSTEM_FEATURES_INVENTORY.md** - 系統功能清單
2. **frontend/pages/test-all-features.vue** - 測試主頁面
3. **frontend/components/test/FeatureModule.vue** - 功能模組組件
4. **frontend/components/test/FeatureTest.vue** - 功能測試組件

---

## 🎯 功能特色

### 1. 完整的功能清單 (SYSTEM_FEATURES_INVENTORY.md)

包含:
- ✅ 使用者類型分類 (一般使用者 vs 企業使用者)
- ✅ 詳細的功能流程說明
- ✅ 所有 API 端點 (142 個)
- ✅ 權限對照表
- ✅ 主要業務流程圖

### 2. 單頁測試介面 (test-all-features.vue)

特色:
- 🧪 **無需登入即可訪問** - 直接打開就能測試
- 🎨 **美觀的UI** - 使用漸層色和現代化設計
- 📊 **即時統計** - 顯示測試通過/失敗數量
- 🔍 **搜尋功能** - 快速找到要測試的功能
- 📦 **模組化設計** - 功能依類別分組
- 🔄 **支援兩種使用者類型切換** - 一般 vs 企業

### 3. 包含的測試模組

#### 所有使用者通用:
1. 🔐 **認證授權** (6個功能)
2. 📅 **會議管理** (13個功能)
3. ✅ **出席管理** (6個功能)
4. 🗳️ **投票議題管理** (9個功能)
5. 📊 **投票功能** (8個功能)
6. 🔔 **通知管理** (13個功能)
7. 📄 **文件管理** (10個功能)
8. 🗺️ **地區資料** (4個功能)

#### 企業使用者專屬:
9. 🏢 **更新會管理** (7個功能)
10. 👥 **所有權人管理** (8個功能)
11. 📍 **地號管理** (5個功能)
12. 🏗️ **共同區域管理** (4個功能)
13. 🏭 **企業管理** (13個功能)

#### 管理員專屬:
14. 👤 **使用者管理** (15個功能)
15. ⚙️ **系統設定** (11個功能)

---

## 🚀 使用方式

### 啟動測試頁面

1. 確保前端服務已啟動:
```bash
cd frontend
npm run dev
```

2. 在瀏覽器開啟:
```
http://localhost:3000/test-all-features
```

### 測試流程

#### 1. 設定環境
- 設定 API 基礎位址 (預設: `http://localhost:8080`)
- 選擇使用者類型 (一般使用者 / 企業使用者)

#### 2. 選擇功能模組
- 點擊模組標題展開
- 或使用「全部展開」按鈕

#### 3. 執行單一測試
1. 點擊測試項目右側的 ▼ 展開
2. 查看預設測試資料
3. 可修改測試資料
4. 點擊「執行測試」按鈕
5. 查看測試結果 (成功/失敗)
6. 查看完整回應內容

#### 4. 測試資料填充
- 點擊「填入測試資料」自動填充預設值
- 點擊「清除」清空表單

#### 5. 結果管理
- 查看測試通過/失敗統計
- 點擊「複製結果」複製 JSON 回應
- 點擊「清除結果」重置統計

---

## 📝 測試項目範例

### 認證測試流程

```
1. 註冊 → 填入使用者資料 → 執行
2. 登入 → 使用註冊的帳密 → 取得 Token
3. 取得當前使用者 → 驗證登入狀態
4. 登出 → 清除 Token
```

### 會議完整測試流程

```
1. 建立更新會 (企業使用者)
2. 新增所有權人
3. 建立會議
4. 查看合格投票人快照
5. 會員報到
6. 建立投票議題
7. 開始投票
8. 進行投票
9. 查看投票統計
10. 結束投票
11. 匯出會議通知書
12. 匯出簽到簿
```

### 企業管理測試流程

```
1. 查看企業資料
2. 產生邀請碼
3. 新使用者註冊 (使用邀請碼)
4. 審核使用者
5. 指派成員到更新會
6. 設定為企業管理者
```

---

## 🎨 介面功能

### 頂部控制列
- **API 基礎位址輸入框** - 可切換測試環境
- **使用者類型選擇器** - 切換一般/企業使用者視圖
- **測試統計** - 即時顯示通過/失敗數量

### 功能過濾列
- **搜尋框** - 搜尋功能名稱
- **全部展開** - 展開所有模組
- **全部收合** - 收合所有模組
- **清除結果** - 重置測試統計

### 測試項目卡片
- **功能標題** - 清楚標示功能名稱
- **HTTP 方法** - 顯示 GET/POST/PUT/DELETE/PATCH
- **API 端點** - 顯示完整路徑
- **認證標記** - 🔒 標示需要認證的功能
- **表單欄位** - 動態產生測試資料輸入框
- **執行按鈕** - 執行測試並顯示結果
- **結果顯示** - ✅成功 或 ❌失敗，含完整 JSON 回應

---

## 📊 測試資料規則

### 自動資料產生
- **時間戳記** - 使用 `Date.now()` 產生唯一值
- **Email** - 自動產生 `test_[timestamp]@example.com`
- **使用者名稱** - 自動產生 `testuser_[timestamp]`

### 資料類型支援
- ✅ 文字 (text)
- ✅ 數字 (number)
- ✅ Email (email)
- ✅ 密碼 (password)
- ✅ 日期 (date)
- ✅ 時間 (time)
- ✅ 文字區域 (textarea)
- ✅ 下拉選單 (select)

### 特殊處理
- **路徑參數** - 自動替換 URL 中的 `{id}` 等佔位符
- **JSON 字串** - 自動解析 JSON 格式的欄位
- **逗號分隔** - 特定欄位自動轉換為陣列 (如 renewal_ids, permissions)
- **布林值** - 字串 "true"/"false" 自動轉換為布林值

---

## 🔍 測試結果解讀

### 成功回應 (綠色)
```
✅ 測試成功
狀態碼: 200
耗時: 125ms
▶ 查看完整回應 (JSON 格式)
```

### 失敗回應 (紅色)
```
❌ 測試失敗
狀態碼: 400
耗時: 89ms
錯誤訊息: [顯示錯誤詳情]
▶ 查看完整回應
```

---

## 🎯 進階使用

### 1. 批次測試
雖然當前版本為手動逐一測試，但可以:
1. 開啟多個測試項目
2. 依序填入資料
3. 依序執行
4. 比對結果

### 2. 測試資料重用
1. 執行測試後查看回應
2. 複製 ID 等重要欄位
3. 貼到下一個測試的輸入框
4. 建立完整測試流程

### 3. 自訂測試環境
修改 API 基礎位址可測試不同環境:
- 本機開發: `http://localhost:8080`
- 測試環境: `http://test-server:8080`
- 正式環境: `https://api.example.com`

---

## 📦 檔案結構

```
frontend/
├── pages/
│   └── test-all-features.vue          # 測試主頁面
├── components/
│   └── test/
│       ├── FeatureModule.vue          # 功能模組組件
│       └── FeatureTest.vue            # 功能測試組件
SYSTEM_FEATURES_INVENTORY.md          # 功能清單文件
```

---

## 🔧 技術實現

### 主要技術
- **Vue 3 Composition API** - 現代化響應式框架
- **Fetch API** - 原生 HTTP 請求
- **動態表單生成** - 根據欄位定義自動產生輸入框
- **路徑參數替換** - 智能替換 RESTful URL 參數
- **JSON 解析** - 自動處理 JSON 格式資料

### 關鍵功能
1. **動態組件** - 根據使用者類型顯示不同模組
2. **狀態管理** - 追蹤展開/收合狀態
3. **表單驗證** - 必填欄位標記
4. **錯誤處理** - 友善的錯誤訊息顯示
5. **回應格式化** - 美化 JSON 輸出

---

## ✨ 特殊功能

### 1. 智能欄位處理
- 自動偵測 JSON 字串並解析
- 自動轉換逗號分隔字串為陣列
- 自動轉換布林字串為布林值

### 2. 完整請求記錄
控制台會輸出:
```javascript
Testing API: {
  url: "http://localhost:8080/api/meetings/1",
  method: "GET",
  body: {...}
}
```

### 3. 回應時間追蹤
每個請求都會記錄執行時間，方便效能分析

---

## 📱 響應式設計

- ✅ 桌面版 (>= 1024px) - 雙欄排列
- ✅ 平板版 (768px - 1024px) - 單欄排列
- ✅ 手機版 (< 768px) - 垂直堆疊

---

## 🎓 最佳實踐

### 測試順序建議

1. **先測試認證**
   - 註冊 → 登入 → 取得使用者資訊

2. **測試基礎資料**
   - 地區資料 (無需認證)
   - 系統設定

3. **測試核心功能** (企業使用者)
   - 建立更新會
   - 新增所有權人
   - 新增地號/建號

4. **測試會議流程**
   - 建立會議
   - 報到
   - 建立議題
   - 投票

5. **測試輔助功能**
   - 通知
   - 文件
   - 統計報表

---

## 🐛 除錯技巧

### 1. 查看控制台
按 F12 開啟瀏覽器開發者工具，查看:
- Network 分頁: 檢查實際發送的請求
- Console 分頁: 查看測試日誌

### 2. 常見問題

**Q: 403 Forbidden**
A: 檢查是否需要先登入並設定 Token

**Q: 404 Not Found**
A: 檢查 API 基礎位址是否正確

**Q: 500 Internal Server Error**
A: 檢查後端服務是否正常運行

**Q: CORS 錯誤**
A: 確認後端已設定 CORS 允許前端網域

---

## 📈 統計資訊

### 功能涵蓋
- **總 API 端點**: 142 個
- **測試項目**: 100+ 個
- **功能模組**: 15 個
- **支援欄位類型**: 8 種

### 使用者類型
- **一般使用者功能**: ~60 個
- **企業使用者額外功能**: ~40 個
- **管理員專屬功能**: ~25 個

---

## 🎉 完成！

您現在擁有一個完整的系統測試介面，可以:
- ✅ 測試所有 API 端點
- ✅ 驗證功能正確性
- ✅ 查看即時回應
- ✅ 追蹤測試結果
- ✅ 模擬不同使用者類型

祝測試順利！🚀
